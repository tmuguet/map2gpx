<!DOCTYPE html>

<html lang="fr">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, user-scalable=no" />
  <meta name="author" content="Thomas Muguet" />
  <meta name="robots" content="index,follow" />

  <title>map2gpx par tmuguet</title>
  <link rel="icon" type="image/png" sizes="72x72" href="ico/logo-medium-72.png" />
  <link rel="apple-touch-icon" sizes="57x57" href="ico/logo-medium-57.png" />
  <link rel="apple-touch-icon" sizes="72x72" href="ico/logo-medium-72.png" />
  <link rel="apple-touch-icon" sizes="114x114" href="ico/logo-114.png" />
  <link rel="apple-touch-icon" sizes="144x144" href="ico/logo-144.png" />

  <link rel="alternate" hreflang="fr" href="https://map2gpx.fr/index.html" />
  <link rel="alternate" hreflang="en" href="https://map2gpx.eu/index.html" />
  <link rel="alternate" hreflang="x-default" href="https://map2gpx.eu/index.html" />

  <meta property="og:title" content="map2gpx" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://map2gpx.fr/screenshot.png" />
  <meta property="og:url" content="https://map2gpx.fr/index.html" />

  <link rel="stylesheet" href="node_modules/jquery-ui-dist/jquery-ui.min.css" />
  <link rel="stylesheet" href="node_modules/leaflet/dist/leaflet.css" />
  <link rel="stylesheet" href="node_modules/leaflet-control-topcenter/dist/leaflet-control-topcenter.css" />
  <link rel="stylesheet" href="node_modules/leaflet-minimap/dist/Control.MiniMap.min.css" />
  <link rel="stylesheet" href="node_modules/leaflet-easybutton/src/easy-button.css" />
  <link rel="stylesheet" href="node_modules/leaflet.awesome-markers/dist/leaflet.awesome-markers.css" />
  <link rel="stylesheet" href="node_modules/leaflet-routing-machine/dist/leaflet-routing-machine.css" />
  <link rel="stylesheet" href="node_modules/geoportal-extensions-leaflet/dist/GpPluginLeaflet.css" />
  <link rel="stylesheet" href="node_modules/leaflet-control-geocoder/dist/Control.Geocoder.css" />
  <link rel="stylesheet" href="node_modules/shepherd.js/dist/css/shepherd-theme-square.css" />
  <link rel="stylesheet" href="dist/css/map2gpx.min.css" />

  <script src="https://use.fontawesome.com/769d9e20e5.js"></script>
  <script src="node_modules/@babel/polyfill/dist/polyfill.min.js"></script>
  <script src="node_modules/jquery/dist/jquery.min.js"></script>
  <script src="node_modules/jquery-ui-dist/jquery-ui.min.js"></script>
  <script src="node_modules/leaflet/dist/leaflet.js"></script>
  <script src="node_modules/leaflet-control-topcenter/dist/leaflet-control-topcenter.js"></script>
  <script src="node_modules/leaflet-minimap/dist/Control.MiniMap.min.js"></script>
  <script src="node_modules/leaflet-easybutton/src/easy-button.js"></script>
  <script src="node_modules/leaflet.awesome-markers/dist/leaflet.awesome-markers.min.js"></script>
  <script src="node_modules/leaflet-routing-machine/dist/leaflet-routing-machine.min.js"></script>
  <script data-url="autoconf.json" src="node_modules/geoportal-extensions-leaflet/dist/GpPluginLeaflet.js"></script>
  <script src="node_modules/@tmcw/togeojson/dist/togeojson.umd.js"></script>
  <script src="node_modules/@mapbox/corslite/corslite.js"></script>
  <script src="node_modules/promise-queue/lib/index.js"></script>
  <script src="node_modules/leaflet-filelayer/src/leaflet.filelayer.js"></script>
  <script src="node_modules/lrm-geoportail/dist/lrm-geoportail.min.js"></script>
  <script src="node_modules/lrm-straightline/dist/lrm-straightline.min.js"></script>
  <script src="node_modules/leaflet-trackdrawer/dist/leaflet.trackdrawer.umd.js"></script>
  <script src="node_modules/leaflet-trackstats/dist/leaflet.trackstats.umd.js"></script>
  <script src="node_modules/chart.js/dist/Chart.min.js"></script>
  <script src="node_modules/chartjs-plugin-annotation/chartjs-plugin-annotation.min.js"></script>
  <script src="node_modules/file-saver/dist/FileSaver.min.js"></script>
  <script src="node_modules/togpx/togpx.js"></script>
  <script src="node_modules/tokml/tokml.js"></script>
  <script src="node_modules/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
  <script src="node_modules/tippy.js/dist/tippy.min.js"></script>
  <script src="node_modules/shepherd.js/dist/js/shepherd.min.js"></script>
  <script src="dist/js/map2gpx.min.js"></script>
</head>

<body>
  <div style="display: none">
    <div id="help-welcome">
      <p>
        <img src="map2gpx.png" alt="map2gpx" style="float: right" /> <strong>map2gpx</strong> vous laisse tracer des
        itinéraires (pour la randonnée par exemple) et les exporter aux formats GPX, KML ou GeoJSON. Il vous est aussi
        possible d'importer vos propres fichiers pour afficher leurs données.<br />
        Utilisant les données issues de
        <a href="https://www.geoportail.gouv.fr/" target="_blank" rel="noopener noreferrer">Géoportail</a>, cet outil
        ne fonctionne que sur le territoire français. Pour une version internationale, veuillez utiliser
        <a href="https://map2gpx.eu/">map2gpx.eu</a>.
      </p>
      <hr />
      <p>
        Pour rapporter un problème ou proposer des améliorations, n'hésitez pas à ouvrir un ticket sur le projet
        <a href="https://github.com/tmuguet/map2gpx" target="_blank" rel="noopener noreferrer">GitHub</a>.
      </p>
    </div>
    <div id="help-layers">
      <p>
        Plusieurs couches sont disponibles. Par défaut, le fond de <em>Cartes IGN</em> est affiché en transparence au
        dessus des <em>Photographies aériennes</em>.<br />
        Vous pouvez régler l'opacité et la visibilité des couches.<br />
        Si vous préférez utiliser des fonds de cartes libres, vous pouvez <a href="osm.html">cliquer ici</a>.
      </p>
    </div>
    <div id="help-search">
      <p>Vous pouvez rechercher un lieu ou une adresse, pour y centrer la carte.</p>
    </div>
    <div id="help-autotrace">
      <p>
        Pour démarrer une trace, cliquez sur ce bouton <i class="fa fa-plus"></i>, puis cliquez sur la carte pour
        ajouter un marqueur.<br />
        Cliquez à nouveau pour rajouter de nouveaux marqueurs aux points de passage; le tracé sera automatiquement
        calculé en fonction des chemins répertoriés.
      </p>
      <p>
        <strong>Attention:</strong> en mode tracé, vous devez utilisez le bouton
        <span class="leaflet-control-zoom-in">+</span> pour zoomer.
      </p>
    </div>
    <div id="help-straighttrace">
      <p>
        Par défaut, le tracé se fait en mode <em>automatique</em> (<i class="fa fa-map-o"></i>).<br />
        Le tracé peut ne pas fonctionner dans certains cas; vous pouvez activer le mode de tracé en
        <em>ligne droite</em> <i class="fa fa-compass"></i> pour tracer des lignes droites entre les marqueurs au lieu
        du tracé <em>automatique</em> <i class="fa fa-map-o"></i>.
      </p>
    </div>
    <div id="help-data">
      <p>
        Le graphe vous affiche par défaut l'altitude et la pente sur la totalité de l'itinéraire. La pente de
        l'itinéraire est une estimation de la pente sur le sentier (i.e. la pente que vous avez à monter/descendre).
        Cette donnée, calculée par ce site, n'est fournie qu'à titre indicatif.
      </p>
      <p>
        En cliquant sur &quot;<span style="white-space: nowrap">Pente du terrain</span>&quot; dans la légende, vous
        pouvez aussi afficher la pente du terrain sur lequel passe l'itinéraire, telle qu'affichée par la couche
        &quot;<span style="white-space: nowrap">Carte des pentes</span>&quot;.<br />
        Une valeur de <em>45</em> indique une pente supérieure à 45°. <em>40</em> indique une pente entre 40° et 45°,
        etc. Une valeur de <em>0</em> indique une pente inférieure à 30°.
      </p>
    </div>
    <div id="help-closeloop">
      <p>
        Lorsque vous avez au moins 2 marqueurs, vous pouvez fermer la boucle de l'itinéraire via le bouton
        <i class="fa fa-magic"></i>.
      </p>
    </div>
    <div id="help-export">
      <p>
        Une fois terminé, vous pouvez exporter l'itinéraire via le bouton <i class="fa fa-cloud-download"></i>.<br />
        Vous pouvez exporter aux formats GPX, KML (Google Earth) ou GeoJSON.
      </p>
    </div>
    <div id="help-movemarker">
      <p>Vous pouvez déplacer les marqueurs en les glissant.</p>
      <p>
        En déplaçant un marqueur intermédiaire, les tracés seront automatiquement recalculés en utilisant le mode de
        tracé actif (mode <em>automatique</em> <i class="fa fa-map-o"></i> ou le mode <em>ligne droite</em>
        <i class="fa fa-compass"></i>).
      </p>
    </div>
    <div id="help-deletemarker">
      <p>
        Vous pouvez supprimer un marqueur en sélectionnant le mode <i class="fa fa-eraser"></i> et en cliquant sur le
        marqueur à supprimer.
      </p>
      <p>
        En supprimant un marqueur intermédiaire, un nouveau tracé sera calculé entre les marqueurs précédent et
        suivant en utilisant le mode de tracé actif (mode <em>automatique</em> <i class="fa fa-map-o"></i> ou le mode
        <em>ligne droite</em> <i class="fa fa-compass"></i>)
      </p>
    </div>
    <div id="help-promote">
      <p>
        Vous pouvez définir des points d'étapes, en sélectionnant le mode <i class="fa fa-pause-circle"></i> et en
        cliquant sur le marqueur à marquer comme étape.
      </p>
    </div>
    <div id="help-steps2">
      <p>Vous pouvez cliquer sur chaque itinéraire d'étape et sur chaque marqueur pour voir ses données.</p>
    </div>
    <div id="help-insert">
      <p>
        Vous pouvez insérer un marqueur intermédiaire en sélectionnant le mode <i class="fa fa-plus-circle"></i> et en
        cliquant sur un tracé déjà existant. Vous pourrez alors déplacer le marqueur.
      </p>
    </div>
    <div id="about" title="A propos et crédits">
      <p>
        Cet outil a été créé par
        <a href="https://tmuguet.me" target="_blank" rel="noopener noreferrer">Thomas Muguet</a>, sous licence
        MIT.<br />
        Le code source est disponible sur
        <a href="https://github.com/tmuguet/map2gpx" target="_blank" rel="noopener noreferrer">GitHub</a>.<br />
        Version actuelle : <span class="map2gpx-version"></span>
      </p>
      <hr />
      <p>map2gpx utilise:</p>
      <ul class="columns-2">
        <li>
          <a href="http://fontawesome.io" target="_blank" rel="noopener noreferrer">Font Awesome</a> par Dave Gandy
          (SIL OFL 1.1)
        </li>
        <li><a href="http://jquery.com/" target="_blank" rel="noopener noreferrer">jQuery</a> (MIT license)</li>
        <li><a href="http://jqueryui.com/" target="_blank" rel="noopener noreferrer">jQuery UI</a> (MIT license)</li>
        <li>
          <a href="http://leafletjs.com/" target="_blank" rel="noopener noreferrer">Leaflet</a> (BSD 2-clause
          "Simplified" License)
        </li>
        <li>
          <a href="https://github.com/FCOO/leaflet-control-topcenter" target="_blank"
            rel="noopener noreferrer">leaflet-control-topcenter</a>
          (MIT license)
        </li>
        <li>
          <a href="https://github.com/Norkart/Leaflet-MiniMap" target="_blank"
            rel="noopener noreferrer">Leaflet.MiniMap</a>
          (BSD 2-clause "Simplified" License)
        </li>
        <li>
          <a href="https://github.com/CliffCloud/Leaflet.EasyButton" target="_blank"
            rel="noopener noreferrer">L.EasyButton</a>
          (MIT license)
        </li>
        <li>
          <a href="https://github.com/lvoogdt/Leaflet.awesome-markers" target="_blank"
            rel="noopener noreferrer">Leaflet.AwesomeMarkers</a>
          (MIT license)
        </li>
        <li>
          <a href="http://www.liedman.net/leaflet-routing-machine/" target="_blank" rel="noopener noreferrer">Leaflet
            Routing Machine</a>
          (ISC License)
        </li>
        <li>
          <a href="https://github.com/mapbox/togeojson" target="_blank" rel="noopener noreferrer">togeojson</a> (BSD
          2-Clause "Simplified" License)
        </li>
        <li>
          <a href="https://github.com/tyrasd/togpx" target="_blank" rel="noopener noreferrer">togpx</a> (MIT License)
        </li>
        <li>
          <a href="https://github.com/mapbox/tokml" target="_blank" rel="noopener noreferrer">tokml</a> (BSD 2-Clause
          "Simplified" License)
        </li>
        <li>
          <a href="https://github.com/makinacorpus/Leaflet.FileLayer" target="_blank"
            rel="noopener noreferrer">Leaflet.FileLayer</a>
          (MIT License)
        </li>
        <li>
          <a href="https://github.com/perliedman/lrm-graphhopper" target="_blank" rel="noopener noreferrer">Leaflet
            Routing Machine / GraphHopper</a>
          (ISC License)
        </li>
        <li>
          <a href="https://github.com/tmuguet/lrm-geoportail" target="_blank" rel="noopener noreferrer">Leaflet Routing
            Machine / GeoPortail</a>
          (ISC License)
        </li>
        <li>
          <a href="https://github.com/tmuguet/lrm-straightline" target="_blank" rel="noopener noreferrer">Leaflet
            Routing Machine / Straight Line</a>
          (ISC License)
        </li>
        <li>
          <a href="https://github.com/perliedman/leaflet-control-geocoder" target="_blank"
            rel="noopener noreferrer">Leaflet Control Geocoder</a>
          (BSD 2-Clause "Simplified" License)
        </li>
        <li>
          <a href="https://github.com/tmuguet/Leaflet.TrackDrawer" target="_blank"
            rel="noopener noreferrer">Leaflet.TrackDrawer</a>
          (MIT License)
        </li>
        <li>
          <a href="https://github.com/tmuguet/Leaflet.TrackDrawer.FileLayer" target="_blank"
            rel="noopener noreferrer">Leaflet.TrackDrawer.FileLayer</a>
          (MIT License)
        </li>
        <li>
          <a href="https://github.com/tmuguet/Leaflet.TrackStats" target="_blank"
            rel="noopener noreferrer">Leaflet.TrackStats</a>
          (MIT License)
        </li>
        <li>
          <a href="https://github.com/shipshapecode/shepherd" target="_blank" rel="noopener noreferrer">Shepherd</a>
          (MIT license)
        </li>
        <li>
          <a href="https://github.com/IGNF/geoportal-extensions" target="_blank" rel="noopener noreferrer">Extensions
            Géoportail</a>
          (CeCILL-B)
        </li>
        <li>
          <a href="http://www.chartjs.org/" target="_blank" rel="noopener noreferrer">chart.js</a> (MIT license)
        </li>
        <li>
          <a href="https://github.com/chartjs/chartjs-plugin-annotation" target="_blank"
            rel="noopener noreferrer">chartjs-plugin-annotation.js</a>
          (MIT license)
        </li>
        <li>
          <a href="https://github.com/eligrey/FileSaver.js/" target="_blank" rel="noopener noreferrer">FileSaver.js</a>
          (MIT license)
        </li>
      </ul>
    </div>
  </div>
  <div id="map"></div>
  <div id="data" class="data"></div>
  <div id="data-empty" class="data">
    <h2><i class="fa fa-area-chart fa-3x" aria-hidden="true"></i><br />Rien à montrer ici...</h2>
    Commencez à tracer votre itinéraire pour voir les données le concernant.
  </div>
  <div id="data-computing" class="data"></div>
  <div id="version" class="map2gpx-version"></div>
  <script>
    window.onload = function () {
      Gp.Config.apiKey = Object.keys(Gp.Config.generalOptions.apiKeys)[0];

      $('.map2gpx-version').html('map2gpx v' + Map2gpx.getVersion());

      var map = L.map('map', {
        center: L.latLng(44.96777356135154, 6.06822967529297),
        zoom: 13,
        zoomControl: false,
      });

      var visibleLayers = {
        Photos: L.geoportalLayer.WMTS({ layer: 'ORTHOIMAGERY.ORTHOPHOTOS' }),
        Map: L.geoportalLayer.WMTS({ layer: 'GEOGRAPHICALGRIDSYSTEMS.MAPS' }, { opacity: 0.25 }),
      };
      var visibleOverlays = {};
      var hiddenLayers = {};
      var hiddenOverlays = {
        Slope: L.geoportalLayer.WMTS({ layer: 'GEOGRAPHICALGRIDSYSTEMS.SLOPES.MOUNTAIN' }, { opacity: 0.25 }),
      };
      Map2gpx.controls.addLayers(map, visibleLayers, visibleOverlays, hiddenLayers, hiddenOverlays, map.shouldShowControls() ? 'geoportail' : 'none');

      var drawRoute = Map2gpx.controls.addTrackDrawer(
        map,
        L.TrackStats.geoportail(Gp.Config.apiKey, map),
        new Map2gpx.GeoportailProvider(Gp.Config.apiKey)
      );

      if (map.shouldShowControls()) {
        Map2gpx.controls.addZoom(map, {
          zoomInTitle: 'Zoomer',
          zoomOutTitle: 'Dézoomer',
        });
        Map2gpx.controls.addScale(map);
        Map2gpx.controls.addGeocoder(map, {
          geocoder: new Map2gpx.GeoportailProvider(Gp.Config.apiKey),
          placeholder: 'Rechercher...',
          errorMessage: 'Aucun résultat',
        });
        Map2gpx.controls.addImportExportButtons(map, drawRoute, {
          optionsImport: {
            title: 'Importer un fichier',
            fileLabel: 'Fichier',
            urlLabel: 'Adresse',
            addWaypointsLabel: 'Ajouter les marqueurs de points de passage',
            submitLabel: 'Importer',
            cancelLabel: 'Annuler',
          },
          optionsExport: {
            title: 'Exporter',
            fileLabel: 'Nom du fichier',
            cancelLabel: 'Annuler',
            includeMarkersLabel: 'Inclure les marqueurs de points de passage',
            exportAsSingleTrackLabel: 'Exporter en une trace unique',
          },
        });
        Map2gpx.controls.addTrackDrawerToolbar(map, drawRoute, {
          labelAddMarker: 'Ajouter un marqueur au clic',
          labelInsertMarker: 'Insérer un marqueur au clic sur un tracé',
          labelCloseLoop: 'Fermer la boucle',
          labelDeleteMarker: 'Supprimer un marquer au clic',
          labelPromoteMarker: 'Transformer en point de passage au clic',
          labelDemoteMarker: 'Remettre en point normal au clic',
          labelClean: 'Supprimer tous les marqueurs',
        });
        Map2gpx.controls.addTrackDrawerTracebar(map, drawRoute, {
          labelAuto: 'Utiliser le mode de tracé automatique',
          labelLine: 'Utiliser le mode de tracé en ligne droite',
          routerAuto: L.Routing.geoPortail(Gp.Config.apiKey, { profile: 'Pieton' }),
        });
        Map2gpx.controls.addMinimap(
          map,
          L.geoportalLayer.WMTS({
            layer: 'GEOGRAPHICALGRIDSYSTEMS.MAPS',
          })
        );
        Map2gpx.controls.addInfoToolbar(map, {
          labelInfo: 'A propos & crédits',
          labelHelp: 'Aide',
        });
      }

      Map2gpx.controls.addChart(map, drawRoute, {
        showTerrainSlope: true,
        labelComputing: 'Calculs en cours...',
        labelFetching: 'points à récupérer',
        labelFetched: 'points récupérés',
        labelAltitude: 'Altitude',
        labelSlope: "Pente de l'itinéraire",
        labelTerrainSlope: 'Pente du terrain',
        labelDistance: 'Distance',
        labelDistanceFromStart: 'Distance depuis le départ',
        labelDistanceFromLastStopover: 'Distance depuis la dernière étape',
        labelAltitudeMax: 'Altitude max',
        labelHeightDiffUp: 'D+',
        labelAltitudeMin: 'Altitude min',
        labelHeightDiffDown: 'D-',
      });

      if (map.shouldShowControls()) {
        Map2gpx.controls.addTour(drawRoute, {
          labelNext: 'Suivant',
          labelClose: 'Fermer',
        });
      }
    };
  </script>
</body>

</html>