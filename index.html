<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, user-scalable=no">
    <meta name="author" content="Thomas Muguet">

    <title>map2gpx by tmuguet</title>
    <link rel="shortcut icon" href="ico/logo.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="ico/logo-144.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="ico/logo-114.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="ico/logo-medium-72.png">
    <link rel="apple-touch-icon-precomposed" href="ico/logo-medium-57.png">

    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

    <script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.0/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.0.0/dist/leaflet.js"></script>

    <script src="leaflet/L.Polyline.SnakeAnim.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css" integrity="sha256-EFpFyBbuttUJtoocYzsBnERPWee2JYz4cn5nkUBjW0A=" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.min.js" integrity="sha256-IqiRR5X1QtAdcq5lG4vBB1/WxwrRCkkjno4pfvWyag0=" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://unpkg.com/leaflet-easybutton@2.0.0/src/easy-button.css">
    <script src="https://unpkg.com/leaflet-easybutton@2.0.0/src/easy-button.js"></script>

    <link rel="stylesheet" href="leaflet/GpPluginLeaflet.css" />
    <script data-key="jwwl8p4ie5qcwbgohl0uv7zx" src="leaflet/GpPluginLeaflet.js"></script>
    <script type="text/javascript">
    var keyIgn = 'jwwl8p4ie5qcwbgohl0uv7zx';
    </script>

    <link rel="stylesheet" href="leaflet/Control.Loading.css" />
    <script src="leaflet/Control.Loading.js"></script>

    <link rel="stylesheet" href="leaflet/Control.MiniMap.min.css" />
    <script src="leaflet/Control.MiniMap.min.js"></script>
    <script src="leaflet/gpx.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js" integrity="sha256-GcknncGKzlKm69d+sp+k3A2NyQE+jnu43aBl6rrDN2I=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-annotation/0.5.3/chartjs-plugin-annotation.min.js" integrity="sha256-Qm/k4lfzTvOTP9EIMjrgiEwAkHLZtAfgXW1W/Do9hvk=" crossorigin="anonymous"></script>

    <script src="js/FileSaver.min.js"></script>

    <link rel="stylesheet" href="css/default.css" />
</head>

<body>
    <div style="display: none"><div id="welcome">
        Cet outil <strong>map2gpx</strong> vous laisse tracer des itinéraires (pour la randonnée par exemple) et les exporter en format GPX ou KML. Utilisant les données issues de <a href="https://www.geoportail.gouv.fr/">Géoportail</a>, cet outil ne fonctionne que sur le territoire français.<hr/>
        Pour démarrer une trace, cliquez sur le bouton <i class="fa fa-map-signs"></i> en haut à gauche de la carte pour sélectionner le mode de tracé automatique, puis double-cliquez sur la carte au point de départ pour ajouter un marqueur.<br>
        Double-cliquez pour rajouter de nouveaux marqueurs aux points de passage; le tracé sera automatiquement calculé en fonction des chemins répertoriés. Utilisez le mode <i class="fa fa-map-marker"></i> pour tracer des lignes droites entre les marqueurs au lieu du tracé automatique.<br>
        Vous pouvez déplacer les marqueurs en les glissant, ou les supprimer en cliquant dessus et en sélectionnant "Supprimer ce marqueur".<br/>
        Vous pouvez fermer la boucle de l'itinéraire via le bouton <i class="fa fa-magic"></i> en haut à gauche de la carte.<br/>
        Une fois terminé, vous pouvez exporter l'itinéraire via le bouton <i class="fa fa-cloud-download"></i>.<hr/>
        Pour rapporter un problème ou proposer des améliorations, n'hésitez pas à ouvrir un ticket sur le projet <a href="https://github.com/tmuguet/map2gpx">GitHub</a>.
    </div></div>
    <div style="display: none"><div id="about">
        Cet outil a été créé par <a href="https://tmuguet.me">Thomas Muguet</a>, sous licence MIT. Le code source est disponible sur <a href="https://github.com/tmuguet/map2gpx">GitHub</a> (vous aurez besoin de votre propre clé <a href="http://professionnels.ign.fr/">Géoservices API</a>).<hr/>
        map2gpx utilise:
        <ul>
            <li><a href="http://fontawesome.io">Font Awesome</a> par Dave Gandy (SIL OFL 1.1)</li>
            <li><a href="http://jquery.com/">jQuery</a> (MIT license)</li>
            <li><a href="http://leafletjs.com/">Leaflet</a> (BSD 2-clause "Simplified" License)</li>
            <li><a href="https://github.com/IvanSanchez/Leaflet.Polyline.SnakeAnim">Leaflet.Polyline.SnakeAnim</a> par ivan@sanchezortega.es ("THE BEER-WARE LICENSE")</li>
            <li><a href="https://github.com/CliffCloud/Leaflet.EasyButton">L.EasyButton</a> (MIT license)</li>
            <li><a href="https://github.com/IGNF/geoportal-extensions">Extensions Géoportail</a> (CeCILL-B)</li>
            <li><a href="https://github.com/ebrelsford/Leaflet.loading">Leaflet.loading</a> (MIT license)</li>
            <li><a href="https://github.com/Norkart/Leaflet-MiniMap">Leaflet.MiniMap</a> (BSD 2-clause "Simplified" License)</li>
            <li>Version modifiée de <a href="https://github.com/mpetazzoni/leaflet-gpx/">GPX plugin for Leaflet</a> (BSD 2-clause license)</li>
            <li><a href="https://github.com/lvoogdt/Leaflet.awesome-markers">Leaflet.AwesomeMarkers</a> (MIT license)</li>
            <li><a href="http://www.chartjs.org/">chart.js</a> (MIT license)</li>
            <li><a href="https://github.com/chartjs/chartjs-plugin-annotation">chartjs-plugin-annotation.js</a> (MIT license)</li>
            <li><a href="https://github.com/eligrey/FileSaver.js/">FileSaver.js</a> (MIT license)</li>
            <li>Icones KML et GPX par <a href="http://www.freepik.com" title="Freepik">Freepik</a> sur <a href="http://www.flaticon.com" title="Flaticon">www.flaticon.com</a> (<a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0" target="_blank">CC 3.0 BY</a>)</li>
        </ul>
    </div></div>
    <div id="map" style="display: block; position: absolute; top: 0px; left: 0px; right: 0px; bottom: 150px;"></div>
    <div id="data" style="display: block; position: absolute; height: 150px; left: 0px; right: 0px; bottom: 0px;">
        <canvas id="chart" width="100%" height="100%"></canvas>
    </div>

    <div id="data-empty" style="display: block; position: absolute; height: 150px; left: 0px; right: 0px; bottom: 0px; background-color: #FFFFFF; text-align: center;"><h2><i class="fa fa-area-chart fa-3x" aria-hidden="true"></i><br/>Rien à montrer ici...</h2>Commencez à tracer votre itinéraire pour voir les données le concernant.</i></div>
    <div id="data-invalid" style="display: none; position: absolute; height: 150px; left: 0px; right: 0px; bottom: 0px; background-color: #FFFFFF; text-align: center;"><h2><i class="fa fa-exclamation-triangle fa-3x" aria-hidden="true"></i><br/>Tracé invalide !</h2>Le tracé est invalide: l'itinéraire n'a pas pu être calculé avec le dernier marqueur. Déplacez le marqueur translucide pour ré-essayer un nouvel itinéraire.</i></div>
    <div id="data-computing" style="display: none; position: absolute; height: 150px; left: 0px; right: 0px; bottom: 0px; background-color: #FFFFFF; text-align: center;"><h2><i class="fa fa-spinner fa-pulse fa-3x fa-fw"></i><br/>Calculs en cours...</h2></div>
    <div id="loading" style="display: block; position: absolute; top: 0px; left: 0px; right: 0px; bottom: 0px; background-color: #FFFFFF; text-align: center;"><h2><i class="fa fa-spinner fa-pulse fa-3x fa-fw"></i><br/>Chargement en cours...</h2></div>

    <script src="js/script.js"></script>
</body>
</html>
